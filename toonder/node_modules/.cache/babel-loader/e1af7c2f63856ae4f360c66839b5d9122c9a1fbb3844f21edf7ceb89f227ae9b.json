{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\YEONSU PARK\\\\Desktop\\\\2023_1_Toonder-main\\\\2023_1_Toonder-main\\\\toonder\\\\src\\\\component\\\\find\\\\findpw.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport IDBackground from '../backgrounds/ID_background';\nimport { useNavigate } from 'react-router-dom';\nimport supabase from '../supabase';\nimport styles from './findpw.module.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Findpw() {\n  _s();\n  useEffect(() => {\n    document.title = 'Toonder 비밀번호 찾기';\n  }, []);\n  const navigate = useNavigate();\n  const [email, setEmail] = useState('');\n  const [emailValid, setEmailValid] = useState(false);\n  const [message, setMessage] = useState(null);\n  const [notAllow, setNotAllow] = useState(true);\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    //이메일 유효성과 비밀번호 유효성이 바꼈을때 둘다 유효한 경우만 login버튼 활성화 해주는 기능\n    if (emailValid) setNotAllow(false);else setNotAllow(true);\n    return;\n  }, [emailValid]);\n  const handleEmail = e => {\n    setEmail(e.target.value);\n    const regex = /^[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*.[a-zA-Z]{2,3}$/i;\n    if (regex.test(e.target.value)) {\n      setEmailValid(true);\n    } else {\n      setEmailValid(false);\n    }\n  };\n  const handleResetPassword = async e => {\n    e.preventDefault();\n    setLoading(true);\n    setMessage('');\n    try {\n      await supabase.auth.resetPasswordForEmail(email, {\n        redirectTo: 'http://localhost:3000/newpw'\n      });\n      const [id, domain] = email.split('@');\n      const hiddenID = id.slice(0, 3) + id.slice(3).replace(/./g, '*');\n      const hiddenEmail = hiddenID + '@' + domain;\n      setMessage( /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"\\uBE44\\uBC00\\uBC88\\uD638 \\uC7AC\\uC124\\uC815 \\uB9C1\\uD06C\\uAC00\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 11\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 18\n        }, this), hiddenEmail, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 11\n        }, this), \"\\uB85C \\uBCF4\\uB0B4\\uC84C\\uC2B5\\uB2C8\\uB2E4\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }, this));\n    } catch (error) {\n      console.error(error);\n      setMessage( /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"\\uBE44\\uBC00\\uBC88\\uD638 \\uC7AC\\uC124\\uC815\\uC774 \\uC2E4\\uD328\\uD558\\uC600\\uC2B5\\uB2C8\\uB2E4\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this), \"\\uB2E4\\uC2DC \\uC2DC\\uB3C4\\uD574 \\uC8FC\\uC138\\uC694\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this));\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(IDBackground, {\n    text: \"Find PW\",\n    backgroundSize: \"600px 500px\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.findPw,\n      children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.loading,\n        children: \"\\uCC3E\\uB294 \\uC911 \\uC785\\uB2C8\\uB2E4...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }, this) : message ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.afterFind,\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => navigate(-1),\n          children: \"\\uD655\\uC778\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleResetPassword,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: !emailValid && email.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"\\uC62C\\uBC14\\uB978 \\uC774\\uBA54\\uC77C\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"enter_email\",\n          onChange: handleEmail,\n          type: \"text\",\n          placeholder: \"Enter your E-mail\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          disabled: notAllow,\n          type: \"submit\",\n          children: /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Send Code\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 5\n  }, this);\n}\n_s(Findpw, \"wdr9TT6du4E0D1ftVCVC09UBHRM=\", false, function () {\n  return [useNavigate];\n});\n_c = Findpw;\nexport default Findpw;\nvar _c;\n$RefreshReg$(_c, \"Findpw\");","map":{"version":3,"names":["React","useState","useEffect","IDBackground","useNavigate","supabase","styles","jsxDEV","_jsxDEV","Findpw","_s","document","title","navigate","email","setEmail","emailValid","setEmailValid","message","setMessage","notAllow","setNotAllow","loading","setLoading","handleEmail","e","target","value","regex","test","handleResetPassword","preventDefault","auth","resetPasswordForEmail","redirectTo","id","domain","split","hiddenID","slice","replace","hiddenEmail","children","fileName","_jsxFileName","lineNumber","columnNumber","error","console","text","backgroundSize","className","findPw","afterFind","onClick","onSubmit","length","onChange","type","placeholder","disabled","_c","$RefreshReg$"],"sources":["C:/Users/YEONSU PARK/Desktop/2023_1_Toonder-main/2023_1_Toonder-main/toonder/src/component/find/findpw.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport IDBackground from '../backgrounds/ID_background';\nimport { useNavigate } from 'react-router-dom';\nimport supabase from '../supabase';\nimport styles from './findpw.module.css';\n\nfunction Findpw() {\n  useEffect(() => {\n    document.title = 'Toonder 비밀번호 찾기';\n  }, []);\n  const navigate = useNavigate();\n  const [email, setEmail] = useState('');\n  const [emailValid, setEmailValid] = useState(false);\n  const [message, setMessage] = useState(null);\n  const [notAllow, setNotAllow] = useState(true);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    //이메일 유효성과 비밀번호 유효성이 바꼈을때 둘다 유효한 경우만 login버튼 활성화 해주는 기능\n    if (emailValid) setNotAllow(false);\n    else setNotAllow(true);\n    return;\n  }, [emailValid]);\n\n  const handleEmail = (e) => {\n    setEmail(e.target.value);\n    const regex =\n      /^[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*.[a-zA-Z]{2,3}$/i;\n    if (regex.test(e.target.value)) {\n      setEmailValid(true);\n    } else {\n      setEmailValid(false);\n    }\n  };\n\n  const handleResetPassword = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setMessage('');\n    try {\n      await supabase.auth.resetPasswordForEmail(email, {\n        redirectTo: 'http://localhost:3000/newpw',\n      });\n      const [id, domain] = email.split('@');\n      const hiddenID = id.slice(0, 3) + id.slice(3).replace(/./g, '*');\n      const hiddenEmail = hiddenID + '@' + domain;\n      setMessage(\n        <div>\n          비밀번호 재설정 링크가\n          <br /> <br />\n          {hiddenEmail}\n          <br />\n          <br />로 보내졌습니다\n        </div>\n      );\n    } catch (error) {\n      console.error(error);\n      setMessage(\n        <div>\n          비밀번호 재설정이 실패하였습니다\n          <br />\n          <br />\n          다시 시도해 주세요\n        </div>\n      );\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <IDBackground text=\"Find PW\" backgroundSize=\"600px 500px\">\n      <div className={styles.findPw}>\n        {loading ? (\n          <div className={styles.loading}>찾는 중 입니다...</div>\n        ) : message ? (\n          <div className={styles.afterFind}>\n            <h1>{message}</h1>\n            <button onClick={() => navigate(-1)}>확인</button>\n          </div>\n        ) : (\n          <form onSubmit={handleResetPassword}>\n            <div>\n              {!emailValid && email.length > 0 && (\n                <div>올바른 이메일을 입력해주세요</div>\n              )}\n            </div>\n            <input\n              id=\"enter_email\"\n              onChange={handleEmail}\n              type=\"text\"\n              placeholder=\"Enter your E-mail\"\n            />\n            <button disabled={notAllow} type=\"submit\">\n              <strong>Send Code</strong>\n            </button>\n          </form>\n        )}\n      </div>\n    </IDBackground>\n  );\n}\n\nexport default Findpw;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}